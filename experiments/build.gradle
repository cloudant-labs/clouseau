plugins {
    id 'com.cloudant.scala-library'
    id 'application'
}

def group = 'com.cloudant.ziose.experiments'

/*
 gradle run -PmainClass=Hello
*/
application {
    // Define the main class for the application.
    // mainClass = group + "." + project.findProperty("mainClass").toString()
    mainClass = "${group}.Hello"
}

dependencies {
    implementation(libs.zio.lib)
    implementation(libs.zio.nio)
    implementation(libs.jinterface)
    testImplementation(libs.zio.tests)
    testImplementation(libs.junit)
    testImplementation(libs.zio.test.junit)
}

jar {
    archivesBaseName = "ziose-${project.hasProperty('type') ? 'test' : 'prod'}-${project.ext.version}"
    destinationDirectory = project.ext.outputDir

    from configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    if (project.hasProperty('type')) {
        from sourceSets.toSet().output
    }

    manifest {
        attributes 'Main-Class': 'com.cloudant.ziose.experiments.Hello'
    }
}
