/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Scala library project to get you started.
 * For more details take a look at the 'Building Java & JVM projects' chapter in the Gradle
 * User Manual available at https://docs.gradle.org/7.2/userguide/building_java_projects.html
 */

plugins {
  id 'com.cloudant.scala-library'
  id 'java-library'
}

apply plugin: 'org.scoverage'
apply plugin: 'org.owasp.dependencycheck'
apply plugin: 'com.github.spotbugs'

dependencies {
  implementation(libs.scala.compiler.bridge)
  implementation(libs.scala.library)
  implementation(libs.zio.lib)
  implementation(libs.zio.nio)
  implementation(libs.jinterface)
  implementation(libs.zio.logging)

  implementation(libs.zio.config.typesafe)
  implementation(libs.zio.config.magnolia)

  testImplementation(libs.zio.tests)
  testImplementation(libs.junit)
  testImplementation(libs.zio.test.junit)
}

dependencyCheck {
  failBuildOnCVSS = 5
  failOnError = true
  format = 'XML'
  suppressionFile = "dependency-check-suppressions.xml"
}

spotbugs {
  ignoreFailures = false
  showStackTraces = true
  effort = 'default'
  reportLevel = 'default'
  visitors = ['SwitchFallthrough']
  omitVisitors = ['FindNonShortCircuit']
  reportsDir = file("$buildDir/spotbugs")
  maxHeapSize = '1g'
  extraArgs = ['-nested:false']
  jvmArgs = ['-Duser.language=ja']
}

spotbugsMain {
  reports {
    html {
      enabled = true
      outputLocation = file("$buildDir/spotbugs/spotbugs-report.html")
      stylesheet = 'fancy-hist.xsl'
    }
  }
}
